<div *ngIf="requestType === 'tutor'">
  <div *ngIf="state === 'wait'">
    <div class="row">
      <div class="col">
        <p>
          Toll, dass Du Dir gerade Zeit für Schüler nimmst! Wir suchen nach
          einem(r) passenden Schüler*in für Dich. Sobald jemand gefunden wurde
          ertönt eine Hinweiston - Du kannst Dich in der Zwischenzeit daher
          gerne mit anderen Sachen beschäftigen.
        </p>
      </div>

      <div class="row justify-content-center">
        <div class="col">
          <span
            class="spinner-border spinner-border-sm mr-1 text-primary text-xl"
          ></span>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="state !== 'wait'">
    <misc-audio-autoplay></misc-audio-autoplay>

    <p>Wir haben dir einen Studenten gefunden:</p>
    <misc-user-card
      [user]="student"
      [match]="match"
      type="student"
    ></misc-user-card>

    <div *ngIf="state === 'maybe'">
      <hr />
      <div class="row">
        <p>Möchtest du {{ match.student.first_name }} helfen?</p>
      </div>
      <div class="row">
        <button class="btn btn-primary" (click)="onMatchAccepted(true)">
          Ja
        </button>
        <button class="btn btn-danger" (click)="onMatchAccepted(false)">
          Nein
        </button>
      </div>
    </div>

    <div *ngIf="state === 'accepted'">
      <div *ngIf="match.bothAccepted(); else pending">
        {{ match.student.first_name }} hat die Verbindung akzeptiert. Ihr werdet
        in kürze weitergeleitet.
      </div>

      <ng-template #pending>
        Warte bis, {{ match.student.first_name }} die Verbindung ebenfalls
        akzeptiert hat.
        <span class="spinner-border spinner-border-sm mr-1"></span>
      </ng-template>
    </div>
  </div>
</div>

<div *ngIf="requestType === 'student'">
  <div class="row justify-content-center">
    <div class="col-sm-6">
      <div class="alert alert-danger">
        Wichtig:
        <strong
          >Bitte wähle nach dem Match <mark>Mit Mikrofon</mark> und drücke beim
          Echotest auf <mark class="text-success">JA</mark></strong
        >
      </div>
    </div>
  </div>
  <div *ngIf="state === 'wait'">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-sm-6 text-center">
          <p>
            Hey {{ user.first_name }}, bitte habe ein paar Momente Geduld -<br />
            Wir suchen gerade nach einem Tutor für dich!
          </p>
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only">Sucht...</span>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="state !== 'wait'">
    <misc-audio-autoplay></misc-audio-autoplay>
    <p>Wir haben den perfekten Tutor für dich gefunden</p>
    <misc-user-card
      [user]="tutor"
      [match]="match"
      type="tutor"
    ></misc-user-card>

    <div *ngIf="state === 'maybe'">
      <hr />
      <div class="row">
        <p>
          Möchtest du von {{ match.tutor.first_name }} deine Frage beantworten
          lassen?
        </p>
      </div>
      <div class="row">
        <button class="btn btn-primary" (click)="onMatchAccepted(true)">
          Ja
        </button>
        <button class="btn btn-danger" (click)="onMatchAccepted(false)">
          Nein
        </button>
      </div>
    </div>

    <div *ngIf="state === 'accepted'">
      <div *ngIf="match.bothAccepted(); else pending">
        {{ match.tutor.first_name }} hat die Verbindung akzeptiert. Ihr werdet
        in kürze weitergeleitet.
      </div>

      <ng-template #pending>
        Warte bis, {{ match.tutor.first_name }} die Verbindung ebenfalls
        akzeptiert hat.
        <span class="spinner-border spinner-border-sm mr-1"></span>
      </ng-template>
    </div>
  </div>
</div>
